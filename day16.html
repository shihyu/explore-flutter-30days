<!DOCTYPE HTML>
<html lang="zh-TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Day 16: èŠèŠ Flutter åœ–åƒä½¿ç”¨çš„è‰¯å¥½ç¿’æ…£ï¼Œè¨˜æ†¶é«”æŒæ¡èˆ‡å„ªåŒ–ï¼ - Flutter éµäººè³½ 60 å¤©åˆè¼¯ï¼šç”±è£¡åˆ°å¤– Ã— é€²æ“Šä¹‹è·¯</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Flutter éµäººè³½ 60 å¤©åˆè¼¯ï¼šç”±è£¡åˆ°å¤– Ã— é€²æ“Šä¹‹è·¯</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="day-16-èŠèŠ-flutter-åœ–åƒä½¿ç”¨çš„è‰¯å¥½ç¿’æ…£è¨˜æ†¶é«”æŒæ¡èˆ‡å„ªåŒ–"><a class="header" href="#day-16-èŠèŠ-flutter-åœ–åƒä½¿ç”¨çš„è‰¯å¥½ç¿’æ…£è¨˜æ†¶é«”æŒæ¡èˆ‡å„ªåŒ–">Day 16: èŠèŠ Flutter åœ–åƒä½¿ç”¨çš„è‰¯å¥½ç¿’æ…£ï¼Œè¨˜æ†¶é«”æŒæ¡èˆ‡å„ªåŒ–ï¼</a></h1>
<ul>
<li>ç™¼å¸ƒæ™‚é–“ï¼š2023-10-01 19:12:49</li>
<li>åŸæ–‡é€£çµï¼š<a href="https://ithelp.ithome.com.tw/articles/10332083">https://ithelp.ithome.com.tw/articles/10332083</a></li>
<li>ç³»åˆ—æ¨™è¨˜ï¼šæ¢ç´¢ Flutter ç”±è£¡åˆ°å¤–ï¼Œä¸‰åå¤©å¸¶ä½ å‰å¾€é€²éšç³»åˆ— ç¬¬ 16 ç¯‡</li>
</ul>
<p><img src="images/20120687Kwlcbodsha.png" alt="" /></p>
<p>ç›¸ä¿¡å¤§éƒ¨åˆ† APP éƒ½æœƒä½¿ç”¨åˆ°åœ–ç‰‡ï¼Œå¯èƒ½å ´æ™¯æœ‰è²¼æ–‡ç‰†ã€å¤§é ­ç…§ã€ä¸Šå‚³åœ–ç‰‡ç­‰ç­‰ï¼Œåœ¨å¯¦ä½œæ™‚å¤§å®¶æ˜¯å¦æœ‰é—œå¿ƒéè¨˜æ†¶é«”çš„ä½¿ç”¨æƒ…æ³å‘¢ï¼Ÿæˆ–è¨±åœ¨é–‹ç™¼æ™‚ã€åœ¨è‡ªå·±çš„è£ç½®ä¸Šéƒ½é‹è¡Œçš„é †æš¢ï¼Œæ²’æœ‰ä»€éº¼å•é¡Œï¼Œä½†æœ‰ç¢ºå®šåœ¨ä½¿ç”¨è€…çš„è£ç½®ä¸Šè¡¨ç¾æœƒç›¸åŒå—ï¼Ÿæœ¬æ–‡å°±é€™éƒ¨åˆ†ï¼Œæœ‰é—œåœ–ç‰‡ã€åœ–åƒçš„ä½¿ç”¨ï¼Œè¦è·Ÿå¤§å®¶åˆ†äº«ä¸€äº›é–‹ç™¼è§€å¿µã€ä½¿ç”¨æŠ€å·§èˆ‡å·¥å…·ï¼Œå¦‚ä½•è®“æˆ‘å€‘æœ‰æ•ˆç‡çš„å­˜å–å®ƒå€‘ï¼Œä¸¦ç¢ºä¿ APP çš„è¨˜æ†¶é«”æœ‰æ­£å¸¸ä½¿ç”¨ï¼Œé¿å…ä¸ç•¶æ¶ˆè€—ã€‚</p>
<p>æ·±å‘¼å¸ä¸€å£ï¼Œæˆ‘å€‘é–‹å§‹å§ï¼</p>
<hr />
<h2 id="åœ–æª”æ ¼å¼çš„é¸ç”¨"><a class="header" href="#åœ–æª”æ ¼å¼çš„é¸ç”¨">åœ–æª”æ ¼å¼çš„é¸ç”¨</a></h2>
<ul>
<li><code>png</code>
<ul>
<li>åœ–åƒæ˜¯å…‰æŸµåœ–å½¢ï¼Œç”±åƒç´ ç¶²æ ¼çµ„æˆ</li>
<li>æª”æ¡ˆå¤§å°é€šå¸¸è¼ƒå¤§</li>
<li>é©ç”¨æ–¼é«˜ç´°ç¯€ã€é«˜å¾©é›œæ€§ã€é«˜è§£æï¼Œæˆ–è€…éœ€è¦é€æ˜åº¦å…·æœ‰é€æ˜èƒŒæ™¯çš„åœ–åƒï¼Œä¾‹å¦‚ï¼šç…§ç‰‡</li>
</ul>
</li>
<li><code>jpg</code> â†’ é©åˆä¸€èˆ¬åœ–ç‰‡ï¼Œå¤§å°é©ä¸­</li>
<li><code>webp</code> â†’ æ–°å‹æ ¼å¼ï¼Œå¯ä»£æ›¿ <code>png</code>ã€<code>jpg</code>ã€<code>gif</code>ï¼Œå®¹é‡ç›¸å°å°å¾ˆå¤šï¼Œæ”¯æ´æœ‰æå’Œç„¡æå£“ç¸®ã€é€æ˜èƒŒæ™¯</li>
<li><code>avif</code> â†’ æ–°å‹æ ¼å¼ï¼Œè·Ÿ <code>webp</code> æ”¯æ´åº¦å·®ä¸å¤šï¼Œä½†æ˜¯å¤šäº† HDR é¡è‰²</li>
<li><code>svg</code>
<ul>
<li>åœ–åƒæ˜¯çŸ¢é‡åœ–å½¢ï¼Œç”±æ•¸å­¸æ¼”ç®—å®šç¾©çš„å½¢ç‹€ã€æ›²ç·šå’Œç›´ç·šçµ„æˆ</li>
<li>æª”æ¡ˆéå¸¸å°</li>
<li>é©ç”¨æ–¼ç°¡å–®çš„ç·šæ¢ã€éš¨æ„èª¿æ•´å¤§å°çš„åœ–å½¢ï¼Œå¯ä»¥ä»»æ„ç¸®æ”¾ä¸¦ä¿æŒç›¸åŒå“è³ª</li>
<li>ä¾‹å¦‚ï¼šåœ–æ¨™</li>
</ul>
</li>
</ul>
<p>è£œå……ï¼šåœ¨ Flutter ä¸­ï¼Œä½¿ç”¨éå¤šçš„ SVG åœ–åƒå¯èƒ½æœƒå°æ‡‰ç”¨çš„æ¸²æŸ“æ€§èƒ½ç”¢ç”Ÿä¸€å®šå½±éŸ¿ã€‚ éœ€è¦æ›´å¤šçš„è™•ç†å’Œè§£æï¼Œå› ç‚ºå®ƒå€‘åŒ…å«äº†çŸ¢é‡æ•¸æ“šå’Œå¾©é›œçš„è·¯å¾‘è³‡è¨Šã€‚å› æ­¤ï¼Œä½¿ç”¨å¤§é‡çš„ SVG åœ–åƒå¯èƒ½æœƒå°è‡´è®Šæ…¢ï¼Œç‰¹åˆ¥æ˜¯åœ¨è¼ƒèˆŠçš„è¨­å‚™ä¸Šã€‚ä¸éä»¥å¾Œä¸éœ€è¦å¤ªæ“”å¿ƒï¼Œæ­¤ç¾è±¡åœ¨æ–°çš„ Impeller å¼•æ“ä¸Šæœ‰å¾ˆå¤§çš„å„ªåŒ–ï¼Œèƒ½æœ‰æ•ˆé™ä½è¨ˆç®—æˆæœ¬ï¼Œè¤‡é›œçš„å ´æ™¯ä¹Ÿèƒ½ä¿æŒé †æš¢ï¼Œä½†æ˜¯ä¹Ÿè¦ç­‰åˆ° Android é‡‹å‡º Impeller å¾Œæ‰ç®—å®Œå…¨æ”¯æ´ï¼Œè«‹å¤§å®¶å†ç­‰å¾…ä¸€ä¸‹äº†ã€‚</p>
<h2 id="å­˜å–æœ¬åœ°åœ–æª”"><a class="header" href="#å­˜å–æœ¬åœ°åœ–æª”">å­˜å–æœ¬åœ°åœ–æª”</a></h2>
<p>å¤§å®¶åœ¨ä½¿ç”¨åœ–æª”çš„æ™‚å€™è«‹é¿å…ä½¿ç”¨ <strong>hard-coding</strong> çš„æ–¹å¼å°‡å­—ä¸²å¯«æ­»ï¼Œé›–ç„¶å‰›é–‹å§‹å­¸ç¿’ Flutter åˆ°ä¸€æ®µæ™‚é–“å¾Œï¼Œé‚„æ˜¯è¦ºå¾—é€™æ¨£ç•¶ä¸‹å¾ˆæ–¹ä¾¿ï¼Œå·²ç¶“ç”¢ç”Ÿç¿’æ…£äº†ï¼Œä½†é‚„æ˜¯è«‹æ”¹æ‰é€™å€‹è¡Œç‚ºã€‚</p>
<p>å®ƒçš„ç¼ºé»æœ‰å¹¾å€‹ï¼š</p>
<ol>
<li>æ‰“éŒ¯å­—å°±å‡ºå•é¡Œäº†</li>
<li>10å€‹åœ°æ–¹ä½¿ç”¨åŒä¸€å¼µåœ–ç‰‡ï¼Œéœ€è¦è¼¸å…¥å®Œæ•´çš„å­—ä¸²10æ¬¡</li>
<li>é›£ä»¥ç®¡ç†å’Œç¶­è­·</li>
</ol>
<p>è«‹ä½¿ç”¨ä¸€å€‹è‡ªå®šç¾©çš„æœ¬åœ°åœ–æª”é¡åˆ¥å»ç´€éŒ„æ‰€æœ‰çš„è·¯å¾‘ï¼Œä½¿ç”¨ static const å»å®£å‘Šæ¯å€‹å­—ä¸²ï¼Œé™¤äº†å¥½ç®¡ç†ä¹‹å¤–ã€æ•ˆèƒ½ä¹Ÿæœƒæ›´å¥½ã€‚ä»¥å¾Œåœ–åƒæ”¹äº†ã€è·¯å¾‘è®Šäº†ï¼Œå°±åˆ°é¡åˆ¥è£¡å»åšä¿®æ­£ï¼Œå³å¯å®Œæ•´éœ€æ±‚ã€‚</p>
<p>ä»¥ä¸‹æ–¹ç¯„ä¾‹ä¾†çœ‹ï¼Œå‰µå»ºäº† <strong>AppAssetsPath</strong> é¡åˆ¥ï¼Œå†è£¡é¢æä¾›äº† iconHome é€™å€‹ <code>static const</code> å­—ä¸²ï¼Œä»£è¡¨å°æ‡‰çš„åœ–æª”è·¯å¾‘ã€‚è®“æ•´é«”çš„å¯ç¶­è­·æ€§æé«˜ï¼Œä»¥çµ±ä¸€å…¥å£å»å­˜å–åœ–æª”ï¼Œå¯¦éš›ä¸Šåœ¨å…ƒä»¶ä¸Šçš„å­˜å–æ–¹å¼ä¹Ÿå¾ˆç›´è¦ºã€ç°¡å–®ï¼Œä¸ç”¨å†æµªè²»æ™‚é–“æ‰“å­—äº†ã€‚</p>
<pre><code class="language-dart">@immutable
final class AppAssetsPath {
  const AppAssetsPath._();

  static const String iconHome = 'assets/images/home.jpg';
}

// UI code
Image.asset(AppAssetsPath.iconHome),
</code></pre>
<p>ç›¸ä¿¡æœ‰äº›é–‹ç™¼è€…é‚„æ˜¯è¦ºå¾—è‡ªå·±è¦å¯«é¡åˆ¥ï¼Œå†æ–°å¢æ¯å€‹åœ–æª”å¸¸æ•¸å¾ˆéº»ç…©ï¼Œæ‰€ä»¥é‚„æœ‰ä¸€ç¨®å¤§å®¶å¸¸ç”¨çš„æ–¹å¼ï¼Œä»£ç¢¼ç”Ÿæˆ Codegenã€‚é€é <strong>flutter_gen</strong> å¥—ä»¶å¹«æˆ‘å€‘è‡ªå‹•ç”Ÿæˆæ‰€æœ‰å…§å®¹ï¼Œæˆ‘å€‘åªéœ€è¦åšä¸€é»è¨­å®šï¼Œæœ€å¾Œå† Terminal åŸ·è¡Œ <code>dart run build_runner build -d</code> æŒ‡ä»¤ï¼Œå³å¯å¯¦ç¾æˆ‘å€‘çš„ä½¿ç”¨éœ€æ±‚ã€‚è©³ç´°è«‹çœ‹ pub.devã€‚</p>
<blockquote>
<p><a href="https://pub.dev/packages/flutter_gen">Package: flutter_gen</a></p>
</blockquote>
<h2 id="åœ–æª”å£“ç¸®"><a class="header" href="#åœ–æª”å£“ç¸®">åœ–æª”å£“ç¸®</a></h2>
<h4 id="å£“ç¸®å¾Œå†ä¸Šå‚³åˆ°é›²ç«¯"><a class="header" href="#å£“ç¸®å¾Œå†ä¸Šå‚³åˆ°é›²ç«¯">å£“ç¸®å¾Œå†ä¸Šå‚³åˆ°é›²ç«¯</a></h4>
<p>é©ç•¶åœ°å£“ç¸®åœ–åƒå°æ–¼ä¸Šå‚³å¤§é‡åœ–ç‰‡ï¼Œæˆ–æ˜¯è«‹æ±‚åœ–æª”è³‡æ–™æ™‚éƒ½å¾ˆæœ‰å¹«åŠ©ï¼Œç•¶ç„¶å£“ç¸®å¾Œçš„å“è³ªéœ€è¦ç¢ºèªæ˜¯å¦é”åˆ°æ¨™æº–ï¼Œæ‰ä¸æœƒç‚ºäº†å£“ç¸®å°è‡´å‘ˆç¾å‡ºä¾†å¾ˆç²—ç³™ã€‚</p>
<ul>
<li>æ¸›å°‘é ç«¯ä¸‹è¼‰çš„é »å¯¬</li>
<li>æ¸›å°‘ä½¿ç”¨æ™‚æ‰€éœ€è¦çš„è¨˜æ†¶é«”</li>
<li>é™ä½æœ¬åœ°è³‡æºçš„å¤§å°</li>
<li>åŠ å¿«è¼‰å…¥é€Ÿåº¦</li>
</ul>
<p>ğŸ¦Â ä½¿ç”¨ <strong>flutter_image_compress</strong> å¥—ä»¶å£“ç¸®åœ–æª”</p>
<pre><code class="language-dart">final file = await FlutterImageCompress.compressAndGetFile(
  file.absolute.path, 
    targetPath,
  quality: 90,
  rotate: 180,
);
</code></pre>
<blockquote>
<p><a href="https://pub.dev/packages/flutter_image_compress">Package: flutter_image_compress</a></p>
</blockquote>
<h4 id="å£“ç¸®å¾Œå†æ”¾å…¥æœ¬åœ°ç›®éŒ„"><a class="header" href="#å£“ç¸®å¾Œå†æ”¾å…¥æœ¬åœ°ç›®éŒ„">å£“ç¸®å¾Œå†æ”¾å…¥æœ¬åœ°ç›®éŒ„</a></h4>
<p>ä»¥ä¸‹æä¾›ç›¸é—œçš„ç¶²ç«™å’Œå·¥å…·ï¼š</p>
<ol>
<li>
<p><strong>Squoosh</strong> â†’ GoogleChromeLab æ¨å‡ºçš„é–‹æºå°ˆæ¡ˆï¼Œè™•ç†é€Ÿåº¦å¿«ï¼Œåœ¨å£“ç¸®å¾Œå¯ç€è¦½å‰å¾Œçš„åœ–åƒå°æ¯”ç…§ï¼Œè¼¸å‡ºé«˜å“è³ªçš„å£“ç¸®åœ–åƒã€‚<a href="https://squoosh.app/">ç¶²ç«™</a><br />
<img src="images/20120687S7VJ4KQZci.png" alt="" /></p>
</li>
<li>
<p><strong>tinypng</strong> â†’ çŸ¥åç†Šè²“ï¼Œé€²è¡Œæœ‰æå£“ç¸®ï¼Œæ¸›å°‘åœ–åƒä¸­çš„é¡è‰²æ•¸é‡ï¼Œé™ä½ WEBPã€JPEG å’Œ PNG çš„æª”æ¡ˆå¤§å°ã€‚<a href="https://tinypng.com/">ç¶²ç«™</a><br />
<img src="images/20120687Bmqcv0ZzeE.png" alt="" /></p>
</li>
<li>
<p><strong>ImageOptim</strong> â†’ macOS Appï¼Œå¯ä»¥ç›´æ¥åˆ°å®˜ç¶²ä¸‹è¼‰ï¼Œä½¿ç”¨èµ·ä¾†ç›´è¦ºç°¡å–®ï¼Œåªéœ€è¦å°‡åœ–æª”æ‹‰é€²å»ã€åŒ¯å…¥ï¼Œåœ–ç‰‡å°±æœƒè‡ªå‹•é–‹å§‹è™•ç†ï¼Œå£“ç¸®å¾Œç›´æ¥è¦†è“‹åŸæª”ã€‚<a href="https://imageoptim.com/mac">ç¶²ç«™</a></p>
</li>
</ol>
<blockquote>
<p><a href="https://github.com/ImageOptim/ImageOptim">Github</a><br />
<img src="images/20120687oSuF0aEvLD.png" alt="" /></p>
</blockquote>
<h2 id="é™åˆ¶å¯¬é«˜ä¸å„²å­˜éå¤§çš„åœ–åƒ"><a class="header" href="#é™åˆ¶å¯¬é«˜ä¸å„²å­˜éå¤§çš„åœ–åƒ">é™åˆ¶å¯¬é«˜ï¼Œä¸å„²å­˜éå¤§çš„åœ–åƒ</a></h2>
<p>ç•¶å°ˆæ¡ˆéœ€è¦è¼‰å…¥é«˜è§£æåº¦çš„åœ–åƒæ™‚ï¼Œç‰¹åˆ¥æ˜¯ç„¡é™æ»¾å‹•çš„è²¼æ–‡åˆ—è¡¨ã€å‹•æ…‹ç‰†ç­‰ç­‰ï¼Œå¾ˆå¯èƒ½æœƒå°è‡´å¡é “ï¼Œå› ç‚ºå°‡åŸå§‹åœ–åƒå£“ç¸®åˆ°è¢å¹•çš„é¡¯ç¤ºå°ºå¯¸ï¼Œé€™å€‹ä»»å‹™å¾ˆç¹é‡ä¸”è€—æ™‚ã€‚å¦‚æœ APP ç‰¹åˆ¥åªåœ¨æ‰‹æ©Ÿç«¯ä¸Šé‹è¡Œï¼Œéœ€è¦è€ƒé‡åˆ°æ˜¯å¦é‚„éœ€è¦å°‡å¤§åœ–åƒæä¾›çµ¦ client ç«¯ï¼Œæ˜¯å¦å¯ä»¥åœ¨å¾Œç«¯é€²è¡Œå£“ç¸®å’Œèª¿æ•´ã€‚</p>
<h4 id="å„ªé»"><a class="header" href="#å„ªé»">å„ªé»</a></h4>
<ol>
<li>æ¸›å°‘åœ–åƒçš„é«”ç©ã€å¤§å°</li>
<li>æ¸›å°‘è¨˜æ†¶é«”çš„ä½¿ç”¨</li>
<li>è¼‰å…¥çš„æ™‚é–“æ›´çŸ­ã€æ›´å¿«</li>
<li>ä¿æŒé †æš¢ï¼Œé«”é©—é¿å…å¡é “</li>
<li>æå‡æ¸²æŸ“åœ–åƒçš„æ€§èƒ½<br />
<img src="images/20120687FNz0ivlh3P.png" alt="" /></li>
</ol>
<h4 id="è¨­ç½®ç·©å­˜å¤§å°"><a class="header" href="#è¨­ç½®ç·©å­˜å¤§å°">è¨­ç½®ç·©å­˜å¤§å°</a></h4>
<p>åœ¨å°å€åŸŸé¡¯ç¤ºä¸€å€‹å¤§å°ºå¯¸åœ–åƒï¼ŒImage æœ¬èº«å¯ä»¥è¨­ç½®æŒ‡å®šçš„ç·©å­˜é•·å¯¬ï¼Œä½¿ç”¨ <code>cacheWidth</code> å’Œ <code>cacheHeight</code>ï¼Œé€²è¡Œåœ–åƒè§£ç¢¼ä¸¦ä»¥æŒ‡å®šå¤§å°å­˜å„²åœ¨è¨˜æ†¶é«”ï¼Œé€™å°‡é¿å…åœ¨è§£ç¢¼éç¨‹ä¸­ç”¢ç”Ÿä¸å¿…è¦çš„æˆæœ¬æ¶ˆè€—å’Œç¡¬ç¢Ÿç©ºé–“çš„ä½¿ç”¨ï¼Œæœ€å¾Œä¿å­˜èª¿æ•´éå¾Œçš„å°åœ–åƒã€‚</p>
<pre><code class="language-dart">Image.asset(
    'assets/images/flutter.png',
    cacheWidth: 100,
    cacheHeight: 100,
),

Image.network(
    'images/70760bf1e88b184bb1bc.png',
    cacheWidth: 100,
    cacheHeight: 100,
),
</code></pre>
<p>å‡è¨­æœ‰è¨­ç½® <code>cacheWidth</code> æˆ–æ˜¯ <code>cacheHeight</code> å…©å€‹åƒæ•¸ï¼Œå…§éƒ¨æœƒä½¿ç”¨ ResizeImage é€²è¡Œè™•ç†ï¼Œå°‡åœ–åƒ decode æˆæŒ‡å®šå°ºå¯¸çš„ ImageProviderã€‚åœ¨è™•ç†éå¾Œå¯èƒ½æœƒå¤±å»ä¸€äº›ç´°ç¯€ï¼Œä¸éä½¿ç”¨ä¸Šçš„è¨˜æ†¶é«”å¯ä»¥æœ‰æ•ˆæ¸›å°‘ã€‚<br />
<img src="images/20120687MVZa5XFWk8.png" alt="" /></p>
<p>è‡ªè¡Œè™•ç†åœ–åƒçš„ç¯„ä¾‹ï¼š<br />
é€é MediaQueryData å–å¾—è¢å¹•å°ºå¯¸å’Œåƒç´ æ¯”ï¼Œæ ¹æ“š <code>scale</code> è¨ˆç®—å‡ºæ–°çš„å°ºå¯¸ï¼Œæœ€å¾Œè¿”å›æ–°çš„ ImageProvider è®“å…ƒä»¶ä½¿ç”¨ã€‚</p>
<pre><code class="language-dart">ImageProvider optimizeImageSizeWithScale(
  BuildContext context, {
  required ImageProvider imageProvider,
  double scale = 1,
}) {
  final Size size = MediaQuery.sizeOf(context);
  final double devicePixelRatio = MediaQuery.devicePixelRatioOf(context);
  final Size newSize = size * devicePixelRatio * scale;

  return ResizeImage(
    imageProvider,
    width: newSize.width.round(),
  );
}

// Usage
Image(
  image: optimizeImageSizeWithScale(
    context,
    imageProvider: const NetworkImage('images/Dash%2C_the_mascot_of_the_Dart_programming_language.png'),
    scale: 0.8,
  ),
),
</code></pre>
<p><img src="images/201206872DO3zmT8YR.png" alt="" /></p>
<h4 id="å¾è¨­å‚™æŠ“å–åœ–åƒ"><a class="header" href="#å¾è¨­å‚™æŠ“å–åœ–åƒ">å¾è¨­å‚™æŠ“å–åœ–åƒ</a></h4>
<p>å¦‚æœä»Šå¤©æ˜¯è¦ä¸Šå‚³ç…§ç‰‡ã€åœ–ç‰‡åˆ°å¾Œç«¯ï¼Œä»¥å¤§å®¶ç†Ÿæ‚‰çš„ <strong>image_picker</strong> å¥—ä»¶ä¾†çœ‹ï¼Œå®ƒæœ‰æä¾› <code>maxWidth</code>ã€<code>maxHeight</code>ã€<code>imaqeQuality</code> ä¸‰å€‹åƒæ•¸å¯ä»¥è¨­ç½®ï¼Œé™¤äº†èƒ½æœ‰æ•ˆé¿å…åœ–åƒéå¤§ä»¥å¤–ï¼Œé‚„å¯ä»¥è¼•é¬†åœ°å£“ç¸®å“è³ªã€‚é€™äº›éƒ½å¯ä»¥æ ¹æ“šå¯¦éš›çš„ä½¿ç”¨å ´æ™¯å»æ±ºå®šï¼Œä¹Ÿè¨± APP ä¸éœ€è¦æœ€å¥½çš„å“è³ªå’Œå°ºå¯¸å»é¡¯ç¤ºï¼Œå³å¯æœ‰å¥½çš„æ•ˆæœã€‚</p>
<pre><code class="language-dart">_picker.pickImage(
    source: source,
    maxWidth: maxWidth,
    maxHeight: maxHeight,
    imageQuality: imageQuality, // 0 ~ 100
)
</code></pre>
<blockquote>
<p><a href="https://pub.dev/packages/image_picker">Package: image_picker</a></p>
</blockquote>
<h2 id="é å…ˆè¼‰å…¥åœ–åƒ"><a class="header" href="#é å…ˆè¼‰å…¥åœ–åƒ">é å…ˆè¼‰å…¥åœ–åƒ</a></h2>
<p>å¾ˆå¸¸æˆ‘å€‘æœƒåœ¨å°ˆæ¡ˆè£¡çš„ <code>assets</code> ç›®éŒ„æ”¾ç½®ä¸€äº›æœ¬åœ°åœ–æª”ï¼Œå±¬æ–¼ä¸æœƒæ›´æ”¹ä¸”é »ç¹å‡ºç¾çš„åœ–ç‰‡ï¼Œå¦‚æœå‰›å¥½åœ¨é é¢å‰µå»ºçš„æ™‚å€™è¦é¡¯ç¤ºå¤§é‡çš„åœ–ç‰‡ï¼Œä¾‹å¦‚ï¼š100ã€200å¼µï¼Œé€™æ™‚å€™ä¸€å®šæœƒçœ‹åˆ°åœ–ç‰‡é™¸çºŒè¢«è¼‰å…¥æˆ–æ˜¯æ²’æœ‰é¡¯ç¤ºä¸Šéå¸¸çš„çµ²æ»‘ã€‚</p>
<p>ä½ å¯èƒ½æƒ³èªªæœ¬åœ°æª”æ¡ˆä¸æ˜¯æ‡‰è©²æœƒå¾ˆé †å—ï¼Œç‚ºä»€éº¼ä¸€æ¨£æœƒå»¶é²ï¼Ÿå› ç‚ºå³ä¾¿åœ–åƒæ˜¯å¾æœ¬åœ°è¼‰å…¥ä¸æ˜¯é›²ç«¯ï¼Œå®ƒå€‘éƒ½éœ€è¦å…ˆè¢«ç·©å­˜åˆ°è¨˜æ†¶é«”ï¼Œæ¥è‘—åœ¨å‘ˆç¾åˆ°ç•«é¢ä¸Šï¼Œè€Œä¸æ˜¯ç›´æ¥å°±èƒ½é¡¯ç¤ºã€‚</p>
<p>é€™æ™‚å€™å°±éœ€è¦åœ¨ Splash Page æˆ–æ˜¯åœ¨é é¢ä¸€é–‹å§‹çš„æ™‚å€™é€²è¡Œé å…ˆè¼‰å…¥ï¼Œè®“å¤§éƒ¨åˆ†åœ–ç‰‡éƒ½å¯ä»¥åœ¨ <code>build()</code> æ–¹æ³•è§¸ç™¼ä¹‹å‰å…ˆæº–å‚™å¥½ï¼Œèƒ½å¤ æœ‰æ•ˆé¿å…é²ç·©çš„æƒ…æ³ã€‚</p>
<ul>
<li>Flutter Framework</li>
</ul>
<pre><code class="language-dart">// Precache local
precacheImage(AssetImage(imgPath), context);

// Precache remote
precacheImage(NetworkImage(imgUrl), context);
</code></pre>
<p><img src="images/20120687In64EnK2S4.png" alt="" /></p>
<ul>
<li>ä½¿ç”¨ <strong>cached_network_image</strong> å¥—ä»¶æ™‚ï¼Œå¾ˆå¸¸æœƒæ­é… <strong>flutter_cache_manager</strong> å¥—ä»¶ï¼Œæœ‰è‡ªå·±çš„ CacheManager å»é€²è¡Œç·©å­˜ç®¡ç†ï¼Œå¯ä»¥åœ¨ APP ä¸€é–‹å§‹æˆ–æ˜¯éæ¸¡æ™‚é–“é€²è¡Œé ç«¯çš„åœ–ç‰‡ç·©å­˜</li>
</ul>
<pre><code class="language-dart">// Precache remote if not cache before
await getSingleFile(imgUrl);
</code></pre>
<blockquote>
<p><a href="https://pub.dev/packages/flutter_cache_manager">Package: flutter_cache_manager</a></p>
</blockquote>
<h2 id="svg-åœ–æª”é ç·¨è­¯"><a class="header" href="#svg-åœ–æª”é ç·¨è­¯">SVG åœ–æª”é ç·¨è­¯</a></h2>
<p>é€šå¸¸ä½¿ç”¨åˆ° svg åœ–æª”å¤§å®¶å° <strong>flutter_svg</strong> æ‡‰è©²éƒ½å¾ˆç†Ÿæ‚‰ï¼Œæ­é… <strong>vector_graphics_compiler</strong> å¥—ä»¶ï¼Œå…è¨± svg ç”ŸæˆäºŒé€²åˆ¶æ ¼å¼ï¼Œä½¿ç”¨æ™‚çš„è§£æé€Ÿåº¦æ›´å¿«ï¼Œä¸¦ä¸”å¯ä»¥æ¸›å°‘ clippingã€masking å’Œéåº¦ç¹ªè£½çš„æƒ…æ³ã€‚ç”Ÿæˆä»¥ <code>.vec</code> å¾Œç¶´çš„ svg åœ–æª”</p>
<p>åœ¨ Terminal é€éæŒ‡ä»¤ç”Ÿæˆ <code>svg.vec</code> æª”æ¡ˆã€‚</p>
<pre><code class="language-bash">dart run vector_graphics_compiler -i assets/home.svg -o assets/home.svg.vec
</code></pre>
<p>åœ¨ UI codeï¼Œä½¿ç”¨ <code>AssetBytesLoader</code> è¼‰å…¥åœ–æª”ã€‚</p>
<pre><code class="language-dart">import 'package:flutter_svg/flutter_svg.dart';
import 'package:vector_graphics/vector_graphics.dart';

final Widget homeImage = SvgPicture(
    const AssetBytesLoader('assets/images/icon/home.svg.vec')
);
</code></pre>
<blockquote>
<p><a href="https://pub.dev/packages/flutter_svg">Package: flutter_svg</a><br />
<a href="https://pub.dev/packages/vector_graphics_compiler">Package: vector_graphics_compiler</a></p>
</blockquote>
<h2 id="è³‡æºåœ–æª”æ”¯æ´è§£æåº¦é©é…"><a class="header" href="#è³‡æºåœ–æª”æ”¯æ´è§£æåº¦é©é…">è³‡æºåœ–æª”æ”¯æ´è§£æåº¦é©é…</a></h2>
<p>Flutter æ”¯æ´è§£æåº¦æ„ŸçŸ¥(resolution awareness)ï¼Œæ ¹æ“šè¨­å‚™åƒç´ æ¯”è¼‰å…¥è§£æåº¦åˆé©çš„åœ–åƒï¼Œä¾‹å¦‚ï¼šåœ¨åƒç´ æ¯” 1.8 çš„è¨­å‚™æœƒä½¿ç”¨ <code>2.0x/</code> ç›®éŒ„çš„åœ–åƒ; åƒç´ æ¯” 2.7 æœƒç”¨ <code>3.0/</code> åœ–åƒã€‚</p>
<p>å‡è¨­æˆ‘å€‘æœ‰ä¸€å€‹ <code>cat.png</code> åœ–æª”ï¼Œåœ¨ asset ç›®éŒ„è£¡éœ€è¦æä¾›å¤šå€ç‡çš„å°æ‡‰æª”æ¡ˆï¼Œç‚ºäº†é©é…è¨­å‚™çš„è§£æåº¦ï¼Œé¿å…å°å°ºå¯¸æ‰‹æ©Ÿè¼‰å…¥å¤§å°ºå¯¸ã€å®¹é‡çš„åœ–åƒï¼Œé€™æ˜¯ä¸å¿…è¦çš„éœ€æ±‚ï¼Œè€Œä¸”é‚„æœƒè®“è¼‰å…¥é€Ÿåº¦ä¹Ÿæœƒè®Šæ…¢ï¼Œåš´é‡çš„è©±å¯èƒ½å¾ˆå¿«å°±æœƒæœ‰è¨­å‚™ OOM æƒ…æ³ï¼Œå°è‡´ APP å´©æ½°ã€‚</p>
<p>å¦‚æœå¤§å®¶æœ‰ä½¿ç”¨å’Œç†Ÿæ‚‰ figma é€™é¡çš„è¨­è¨ˆè»Ÿé«”ï¼Œé€šå¸¸åœ¨åœ–æª”åŒ¯å‡ºæ™‚éƒ½æœƒæœ‰å€ç‡å¯ä»¥é¸æ“‡ï¼Œæ“ä½œä¸Šå¾ˆæ–¹ä¾¿ã€‚å–å¾—æª”æ¡ˆå¾Œæ¥è‘—åœ¨åˆ†é…åˆ°å°ˆæ¡ˆçš„æŒ‡å®šè·¯å¾‘ï¼Œè€Œä¸‹æ–¹æˆ‘æœ‰æä¾›ä½¿ç”¨ Dart æ’°å¯«çš„ scriptï¼Œç°¡å–®ã€å¿«é€Ÿåœ°å¹«ä½ è‡ªå‹•åˆ†é…å¥½æª”æ¡ˆï¼Œå¤§å®¶ä¹Ÿä¸éœ€è¦æµªè²»æ™‚é–“äº†ã€‚</p>
<pre><code class="language-dart">.../cat.png       (mdpi baseline)
.../1.5x/cat.png  (hdpi)
.../2.0x/cat.png  (xhdpi)
.../3.0x/cat.png  (xxhdpi)
.../4.0x/cat.png  (xxxhdpi)
</code></pre>
<p>æ’°å¯«è‡ªå·±çš„ dart script å¹«å¿™åˆ†é…åœ–æª”ï¼Œå…ˆå°‡åœ–æª”æ”¾åˆ° assets æŒ‡å®šè·¯å¾‘ï¼Œæ¥è‘—å†æ ¹ç›®éŒ„ä½¿ç”¨æŒ‡ä»¤ã€‚ç•¶ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ Makefile åŸ·è¡Œ</p>
<pre><code class="language-bash">dart tools/allocate_images.dart ./assets/images
</code></pre>
<p><img src="images/20120687AJx9F0dIYa.png" alt="" /><br />
<img src="images/20120687ZxihNOMFIi.png" alt="" /></p>
<blockquote>
<p><a href="https://github.com/chyiiiiiiiiiiii/flutter-tips-and-tricks/tree/main/tips/0001-use-dart-program-to-allocate-resolution-images">Github: flutter-tips-and-tricks</a></p>
</blockquote>
<h2 id="åœ–åƒæ­é…-aspectratio"><a class="header" href="#åœ–åƒæ­é…-aspectratio">åœ–åƒæ­é… AspectRatio</a></h2>
<p>AspectRatio å…ƒä»¶æœ¬èº«å¯ä»¥è®“ child æ ¹æ“šå¯¬é•·æ¯”ä¾‹å»é¡¯ç¤ºï¼Œå¿…é ˆè¨­ç½® <code>aspectRatio</code> åƒæ•¸ï¼Œå¯ä»¥åœ¨ä½¿ç”¨æ™‚æƒ³èªªå¯¬æ¯”é•·ï¼Œç„¶å¾Œä»¥å¯¬/é•·ä¾†å¡«å…¥ã€‚å¦‚æœæ˜¯æ­£æ–¹å½¢ï¼Œå°±æ˜¯è¨­ 1; å¦‚æœæ˜¯å¯¬é•· 16:9 å°±æ˜¯è¨­ 1.77ï¼Œä½¿ç”¨ä¸Šå¾ˆç°¡å–®ã€‚å®ƒçš„ç”¨è™•æ˜¯å¯ä»¥è®“æˆ‘å€‘åœ¨é–‹ç™¼æ™‚ä¸éœ€è¦è¨­ç½®å›ºå®šçš„é•·å¯¬æ•¸å€¼(ä¸åŒè£ç½®è¼ƒå®¹æ˜“è·‘ç‰ˆ)ï¼Œå¯ä»¥æ ¹æ“šè£ç½®çš„å¤§å°é•·å¯¬å»è‡ªå‹•é©é…ï¼Œæ‰€ä»¥é€™ä¹Ÿæ˜¯åœ¨åš APP å¤šç«¯é–‹ç™¼çš„æ™‚å€™ï¼Œå¾ˆå¸¸ç”¨çš„ä¸€å€‹æŠ€å·§ã€‚æœ‰æ•ˆç¢ºä¿åœ¨æ‰€æœ‰è¨­å‚™ä¸Šä¿æŒåœ–åƒçš„ä¸€è‡´æ€§ï¼Œå³ä½¿è¨­å‚™çš„è§£æåº¦ã€å°ºå¯¸ä¸åŒï¼Œå®ƒä¹Ÿæœƒè‡ªå‹•æ”¾å¤§æˆ–ç¸®å°åœ–åƒä»¥ç¬¦åˆ UIã€‚</p>
<pre><code class="language-dart">// 16:9
const AspectRatio(
    aspectRatio: 1.77,
    child: Image(
        image: NetworkImage(
      'images/Dash%2C_the_mascot_of_the_Dart_programming_language.png',
    ),
  ),
),
</code></pre>
<h2 id="å¯¦ä½œé€æ˜åœ–åƒ"><a class="header" href="#å¯¦ä½œé€æ˜åœ–åƒ">å¯¦ä½œé€æ˜åœ–åƒ</a></h2>
<p>ç›¡é‡é¿å…åœ¨ Image å¤–å±¤åŒ…è£¹ <strong>Opacity</strong>ï¼Œé›–ç„¶èƒ½å¯¦ç¾æ•ˆæœï¼Œä½†æ˜¯åœ¨èƒŒå¾Œæ¸²æŸ“æ™‚çš„å·¥ä½œæˆæœ¬æ¯”è¼ƒæ˜‚è²´ï¼Œæ¿«ç”¨æœƒå½±éŸ¿é‹è¡Œå¹€æ•¸ã€‚è©³ç´°å¯ä»¥é–±è®€å¦ä¸€ç¯‡æ–‡ç« ï¼Œæœ‰æ›´å¤šå°æ–¼ Opacity çš„èªªæ˜ã€‚</p>
<p>é‡å°åœ–åƒçš„æ“ä½œå¯ä»¥ä½¿ç”¨ Image æœ¬èº«çš„ <code>color</code> ä»¥åŠ <code>colorBlendMode</code> åƒæ•¸å»åšèª¿æ•´ï¼Œé¡è‰²æœ¬èº«å¯ä»¥ä½¿ç”¨ <code>fromRGBO()</code> å»ºæ§‹æ–¹æ³•ï¼Œç¬¬å››å€‹åƒæ•¸è¨­ç½®æŒ‡å®šçš„ä¸é€æ˜åº¦ã€‚æœ€å¾Œè¨­ç½® BlendMode ç‚º <code>BlendMode.modulate</code>ï¼Œè®“å®ƒå¯ä»¥é€éé¡è‰²èª¿æ•´åœ–ç‰‡ï¼Œå®Œæˆæˆ‘å€‘è¦çš„æ•ˆæœ</p>
<pre><code class="language-dart">// Add white with opacity 0.5
Image(
    image: NetworkImage(
    'images/Dash%2C_the_mascot_of_the_Dart_programming_language.png',
    ),
    color: Color.fromRGBO(255, 255, 255, 0.5),
    colorBlendMode: BlendMode.modulate,
)

// Add green color
Image(
    image: NetworkImage(
    'images/Dash%2C_the_mascot_of_the_Dart_programming_language.png',
    ),
    color: Color.fromRGBO(160, 239, 180, 1),
    colorBlendMode: BlendMode.modulate,
)
</code></pre>
<p><img src="images/20120687nCZx8rfF4p.png" alt="" /></p>
<h2 id="æ·»åŠ -blurhash-è¼‰å…¥æ•ˆæœ"><a class="header" href="#æ·»åŠ -blurhash-è¼‰å…¥æ•ˆæœ">æ·»åŠ  Blurhash è¼‰å…¥æ•ˆæœ</a></h2>
<p>ç‚ºä»€éº¼éœ€è¦è¼‰å…¥æ•ˆæœï¼Œå¯ä»¥è®“ä½¿ç”¨è€…çš„æ˜ç¢ºçŸ¥é“ç¾åœ¨æ¯å¼µåœ–ç‰‡éƒ½æœ‰åœ¨è¼‰å…¥ï¼Œè¼‰å…¥å®Œæˆçš„å…ˆé¡¯ç¤ºï¼Œé‚„æ²’å®Œæˆçš„ç¹¼çºŒæœ‰æ•ˆæœå»æé†’ï¼Œç›¡é‡ä¸è®“ä½¿ç”¨è€…çœ‹åˆ°ç©ºç™½è™•æˆ–æ˜¯éœæ­¢åœ–ç‰‡çš„å‘ˆç¾ã€‚æ ¹æ“šéå»çš„é–‹ç™¼ç¶“é©—èˆ‡ç ”ç©¶ï¼Œç•¶çœ‹åˆ°ç©ºç™½è™•ä¸‰ç§’å¾Œä½¿ç”¨è€…æœƒé–‹å§‹ä¸è€ç…©ï¼Œå°æ–¼ APP çš„è§€æ„Ÿæœƒé–‹å§‹é™ä½ï¼Œ10~15 ç§’å¾Œå°±æœƒå°‡ APP é—œé–‰ã€åœæ­¢ã€‚</p>
<p>å¸¸è¦‹çš„è¼‰å…¥æ•ˆæœï¼Œå¾ˆå¸¸æœƒçœ‹åˆ°æ—‹è½‰çš„ indicator æŒ‡ç¤ºå™¨ï¼Œå¾ˆæ–¹ä¾¿ä½¿ç”¨ä½†ç›¸å°æ¯”è¼ƒæ™®éã€‚æœ‰äº› APP æä¾›å“ç‰Œçš„è¼‰å…¥å‹•ç•«ï¼Œé€™ä¹Ÿæ˜¯ä¸€å€‹é¸æ“‡ï¼Œæé†’ä¹‹é¤˜å¢åŠ è¶£å‘³æ€§ï¼Œç•¶ç„¶é¢¨æ ¼ä¹Ÿæ›´ç‚ºå¼·çƒˆã€‚</p>
<p>é€™è£¡è¦è·Ÿå¤§å®¶åˆ†äº« Blurhash æ•ˆæœï¼Œå°‡åœ–ç‰‡ç·¨ç¢¼æˆ30å€‹å­—å…ƒä»¥ä¸‹çš„ hash å­—ä¸²ï¼Œå®ƒä»£è¡¨ä¸€å€‹æ¨¡ç³Šåœ–åƒï¼Œè®“æˆ‘å€‘åœ¨è¼‰å…¥åœ–ç‰‡æ™‚ï¼Œå¯ä»¥ç•¶ä½œ placeholder å‘ˆç¾ï¼Œæ¨¡ç³Šçš„æ•ˆæœè·ŸåŸå§‹åœ–ç‰‡è‰²å¡Šé¡ä¼¼ï¼Œè®“æ¯å¼µåœ–ç‰‡ä¹Ÿèƒ½çœ‹å‡ºå·®ç•°ã€‚å¾ˆæ£’çš„äº‹ï¼Œç•¶åœ–ç‰‡è¼‰å…¥å®Œæˆæ™‚å®ƒæœƒä»¥æ¼¸è®Šçš„æ–¹å¼åšåœ–åƒè½‰æ›ï¼Œå¾æ¨¡ç³Šç„¡ç¸«åˆ°å¯¦éš›åœ–ç‰‡ã€‚</p>
<p>å¯¦ä½œæ–¹å¼ï¼Œå¯ä»¥å°‡ç”Ÿæˆèˆ‡ç·¨ç¢¼ hash çš„å·¥ä½œå…§å®¹è®“å¾Œç«¯è² è²¬ï¼Œå¯èƒ½åœ¨ client ä¸Šå‚³åœ–ç‰‡å¾Œå»è™•ç†ï¼Œç„¶å¾Œå°‡åœ–æª” url è·Ÿ hash å­˜å„²èµ·ä¾†ã€‚ ç•¶ client è«‹æ±‚è³‡æ–™æ™‚ï¼Œå¯ä»¥åŒæ™‚æ”¶åˆ°é€™å…©å€‹æ±è¥¿ã€‚ ç„¶å¾Œæ¥ä¸‹ä¾†å°±ç°¡å–®äº†ï¼Œè¼‰å…¥æœŸé–“é¡¯ç¤º blurhash æ¨¡ç³Šæ•ˆæœï¼Œæœ€å¾Œå°‡é›²ç«¯çš„å®Œæ•´åœ–åƒé¡¯ç¤ºå‡ºä¾†ã€‚</p>
<p>å¯ä»¥åˆ°å®˜ç¶² BlutHash äº†è§£ï¼Œå¦å¤– Github Repo ä¹Ÿæœ‰æä¾›æ¯å€‹èªè¨€çš„è™•ç†æ–¹å¼ï¼Œä¸»æµèªè¨€ä¸€å®šéƒ½æœ‰æ”¯æ´ï¼Œç•¶ç„¶ Dart ä¹Ÿæœ‰ï¼Œå¯ä»¥åœ¨è‡ªå·±çš„ APP æˆ–æ˜¯å¾Œç«¯é€²è¡Œè™•ç†ã€‚</p>
<blockquote>
<p><a href="https://blurha.sh/">Wolt - BlurHash</a><br />
<a href="https://github.com/woltapp/blurhash">Github</a></p>
</blockquote>
<h3 id="æ•ˆæœç¯„ä¾‹"><a class="header" href="#æ•ˆæœç¯„ä¾‹">æ•ˆæœç¯„ä¾‹</a></h3>
<p><img src="images/20120687pu8gXURVxb.png" alt="" /><br />
<img src="images/LRuwmMU.gif" alt="Blurhash" /></p>
<h3 id="é–‹ç™¼æ–¹å¼"><a class="header" href="#é–‹ç™¼æ–¹å¼">é–‹ç™¼æ–¹å¼</a></h3>
<ul>
<li>ç¬¬ä¸€ç¨®ï¼šä½¿ç”¨ <strong>blurhash_dart</strong> å¥—ä»¶</li>
</ul>
<pre><code class="language-dart">// blurhash è½‰æˆ Widget
Widget build(BuildContext context) {
    final image = BlurHash.decode('LEHV6nWB2yk8pyo0adR*.7kCMdnj').toImage(35, 20);

    return Image.memory(Uint8List.fromList(encodeJpg(image)));
}

// åœ–ç‰‡ç”Ÿæˆ blurhash
final data = File('assets/image/test.png').readAsBytesSync();
final image = img.decodeImage(data.toList());
final blurHash = BlurHash.encode(image!, numCompX: 4, numCompY: 3);
</code></pre>
<blockquote>
<p>æé†’ï¼šå¦‚æœè¦åœ¨ APP ç«¯è™•ç†ï¼Œå› ç‚º <code>encode</code>ã€<code>decode</code> éƒ½æ˜¯åŒæ­¥æ“ä½œï¼Œä¸å½·é€é Background Isolate ä¾†è™•ç†ï¼Œç¢ºä¿æ•ˆèƒ½<br />
<a href="https://pub.dev/packages/blurhash_dart">Package: blurhash_dart</a></p>
</blockquote>
<ul>
<li>ç¬¬äºŒç¨®ï¼šä½¿ç”¨ <strong>flutter_blurhash</strong> å¥—ä»¶ï¼Œæä¾›è¨±å¤š API å¯ä»¥æ“ä½œ</li>
</ul>
<pre><code class="language-dart">BlurHash(
    hash: r'LBS?GdOG-;$zxua}jtj?~VxCITSi',
    image: 'images/70760bf1e88b184bb1bc.png',
    duration: const Duration(seconds: 2),
    onStarted: onStarted,
    onDecoded: onDecoded,
    onDisplayed: onDisplayed,
),
</code></pre>
<blockquote>
<p><a href="https://pub.dev/packages/flutter_blurhash">Package: flutter_blurhash</a></p>
</blockquote>
<ul>
<li>ç¬¬ä¸‰ç¨®ï¼šä½¿ç”¨ <strong>octo_image</strong> å¥—ä»¶ï¼Œçµåˆ <code>cached_network_image</code> ç·©å­˜ä»¥åŠ blurhash</li>
</ul>
<pre><code class="language-dart">OctoImage(
    image: CachedNetworkImageProvider(imgUrl),
    placeholderBuilder: OctoPlaceholder.blurHash(blurhash),
    errorBuilder: (context, error, stackTrace) =&gt; const Icon(
        Icons.warning_rounded,
        color: Colors.black54,
    ),
    fit: BoxFit.cover,
    width: 300,
    height: 300,
),
</code></pre>
<blockquote>
<p><a href="https://pub.dev/packages/octo_image">Package: octo_image</a></p>
</blockquote>
<ul>
<li>ç¬¬å››ç¨®ï¼šä½¿ç”¨ <strong>blurhash_ffi</strong> å¥—ä»¶ï¼Œç·¨ç¢¼å’Œè§£ç¢¼åœ¨èƒŒå¾Œä¸€æ¬¡è™•ç†å®Œæˆï¼Œä¸éœ€è¦å–å¾— hash æ‰èƒ½ä½¿ç”¨ï¼Œç•¶ç„¶åŸºæœ¬çš„å€‹åˆ¥æ“ä½œä¹Ÿæœ‰æä¾›</li>
</ul>
<pre><code class="language-dart">import 'package:blurhash_ffi/blurhash_ffi.dart';

class MyImage extends StatelessWidget {
    const MyImage({
        required this.imageUrl,
        super.key,
    });

    final String imageUrl;

    @override
    Widget build(BuildContext context) {
        return Image(
            image: BlurhashTheImage(
                NetworkImage(imageUrl),
                    decodingHeight: 1920,
                    decodingWidth: 1080,
            ),
            alignment: Alignment.center,
            fit: BoxFit.cover,
        );
    }
}
</code></pre>
<blockquote>
<p><a href="https://pub.dev/packages/blurhash_ffi">Package: blurhash_ffi</a></p>
</blockquote>
<h2 id="æ¨™ç¤ºå¤§å‹åœ–åƒ"><a class="header" href="#æ¨™ç¤ºå¤§å‹åœ–åƒ">æ¨™ç¤ºå¤§å‹åœ–åƒ</a></h2>
<p>ä½¿ç”¨ debugInvertOversizedImages é€šéé¡è‰²åè½‰å’Œé¡›å€’ä¾†æ¨™ç¤ºé«”ç©éå¤§ã€ä½¿ç”¨å¤§é‡è¨˜æ†¶é«”çš„åœ–åƒã€‚<br />
<img src="images/20120687yQkH9rOkcg.png" alt="" /></p>
<p>å¦‚æœä¸æƒ³é–‹å•Ÿ DevTools ä¹Ÿå¯ä»¥åœ¨ä¸»å‡½å¼ <code>main()</code> è¨­ç½®ã€‚</p>
<pre><code class="language-dart">debugInvertOversizedImages = true
</code></pre>
<blockquote>
<p>æ›´å¤šä¸”æ›´è©³ç´° Debugging å…§å®¹ï¼Œè«‹çœ‹å¦ä¸€ç¯‡æ–‡ç« ï¼Œç­‰å¾…ç™¼å¸ƒã€‚</p>
</blockquote>
<hr />
<h2 id="ç¸½çµ"><a class="header" href="#ç¸½çµ">ç¸½çµ</a></h2>
<p>æœ¬æ–‡åˆ†äº«äº†æœ‰é—œåœ–åƒçš„è§€å¿µèˆ‡æ“ä½œï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥å¯©è¦–å°ˆæ¡ˆæ˜¯å¦æœ‰æ­£å¸¸é‹ç”¨è¨˜æ†¶é«”ï¼Œå°¤å…¶æ˜¯å¤§åœ–åƒç·©å­˜èˆ‡è¼‰å…¥å°ç©ºé–“çš„éƒ¨åˆ†ï¼Œæ²’æœ‰æ³¨æ„çš„è©±ï¼Œé™¤äº†è¨˜æ†¶é«”æš´æ¼²ä¹‹å¤–ï¼Œä¹Ÿå¾ˆå®¹æ˜“å°±æœƒé€ æˆå¡é “ã€‚å¦‚æœæœ‰å…¶ä»–åœ–åƒçš„å„ªåŒ–æ–¹å¼èˆ‡å…§å®¹ä¹Ÿéå¸¸æ­¡è¿æå‡ºï¼Œæˆ‘å€‘å¯ä»¥åšå€‹è¨è«–ï¼Œä¸€èµ·äº’ç›¸å­¸ç¿’ã€‚ä»¥ä½¿ç”¨è€…é«”é©—ç‚ºç¬¬ä¸€å„ªå…ˆï¼Œæ²’éŒ¯å§ï¼</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="day15.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="day17.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="day15.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="day17.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
