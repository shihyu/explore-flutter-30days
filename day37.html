<!DOCTYPE HTML>
<html lang="zh-TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Day 37ï¼šClean Architecture X Flutter (ä¸€)  | SOLID ğŸ› - Flutter éµäººè³½ 60 å¤©åˆè¼¯ï¼šç”±è£¡åˆ°å¤– Ã— é€²æ“Šä¹‹è·¯</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Flutter éµäººè³½ 60 å¤©åˆè¼¯ï¼šç”±è£¡åˆ°å¤– Ã— é€²æ“Šä¹‹è·¯</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="day-37clean-architecture-x-flutter-ä¸€---solid-"><a class="header" href="#day-37clean-architecture-x-flutter-ä¸€---solid-">Day 37ï¼šClean Architecture X Flutter (ä¸€)  | SOLID ğŸ›</a></h1>
<blockquote>
<p>åŸæ–‡ä¾†æºï¼š<a href="https://ithelp.ithome.com.tw/articles/10325321">Day 7ï¼šClean Architecture X Flutter (ä¸€)  | SOLID ğŸ›</a></p>
</blockquote>
<p>è¬›å®Œäº† CI/CDï¼Œæ¥ä¸‹ä¾†å°±å¸¶å¤§å®¶ä¸€èµ·æ¢è¨ä¸€ä¸‹æ¶æ§‹å§ï¼é€™éƒ¨åˆ†çš„æœƒå¾ Clean Acritecture å…¥é–€é–‹å§‹è§£èªªï¼Œä»Šå¤©å…ˆå¸¶å¸¶å®¶çœ‹ Clean Architecture é€™æœ¬æ›¸ï¼Œæˆ‘è¦ºå¾—å¾ˆé‡è¦çš„å…©å€‹ç« ç¯€ SOLID å’Œ Clean Architectureã€‚ç†Ÿæ‚‰äº†é€™äº›ä»¥å¾Œï¼Œä»¥å¾Œé¢æœƒå°ç¨‹å¼æ‡‰è©²å¦‚ä½•èµ·æ‰‹ã€æ€éº¼å¯«æ‰æ•´æ½”ï¼Œæœƒæœ‰æ›´å¤šçš„æƒ³æ³•å’Œä¾å¾ªçš„æ¨™æº–ã€‚åœ¨å¤§å®¶æœ‰é»æ¦‚å¿µä»¥å¾Œï¼Œæ˜å¤©å†é–‹å§‹å¯¦æˆ°æ¼”ç·´ï¼</p>
<pre><code class="language-jsx">ğŸ› çœ‹å®Œé€™ç« ç¯€ä½ å°‡å­¸åˆ°
&gt; Clean Architecture SOLID çš„åŸºæœ¬è§€å¿µå’Œç¯„ä¾‹
&gt; æ¶æ§‹çš„å¤§åŸå‰‡

</code></pre>
<p>å¾ˆå¤šæ™‚å€™æˆ‘å€‘éƒ½èªç‚ºæœƒå¯«ç¨‹å¼å°±å¥½ï¼Œå°é€™ç¨®åªè«‡æ¶æ§‹è·Ÿæ–¹æ³•è«–çš„æ›¸ä¸ä¸€å®šæå¾—èµ·èˆˆè‡´ï¼Œä½†æ˜¯å¦‚æœä½ çœŸçš„æœ‰æ·±å…¥é–±è®€é€™äº›çŸ¥è­˜ï¼Œå¯ä»¥æå‡ä½ çš„å“å‘³ï¼Œè®“ä½ ä¸ç®¡æ˜¯åœ¨è®€æˆ–æ˜¯å¯«éƒ½èƒ½å¤ æ›´ä¸Šä¸€å±¤æ¨“ã€‚é€éé€™äº›æ˜è¨‚çš„æ¨™æº–ï¼Œä¹Ÿå¯ä»¥å¾ˆå¿«åœ°å’Œå…¶ä»–äººè¨è«–é‚£äº›ä½ èªç‚ºä¸å°å‹ï¼Œä½†å»åˆèªªä¸å‡ºå“ªè£¡æœ‰å•é¡Œçš„ç¨‹å¼ç¢¼ï¼Œå¥½è™•å¤šå¤šï¼</p>
<h1 id="solid"><a class="header" href="#solid">SOLID</a></h1>
<p>SOLID æ˜¯ä¸€å€‹ç°¡å¯«ï¼Œæ¯å€‹å­—æ¯ä»£è¡¨äº†ä¸€å€‹è»Ÿé«”è¨­è¨ˆåŸå‰‡ã€‚é€™äº›åŸå‰‡æ—¨åœ¨å¹«åŠ©é–‹ç™¼äººå“¡ç·¨å¯«æ›´å¥½çš„ã€æ˜“æ–¼ç¶­è­·å’Œæ“´å±•çš„ç¨‹å¼ç¢¼ã€‚</p>
<h2 id="single-responsibility-principle-srpå–®ä¸€è·è²¬åŸå‰‡"><a class="header" href="#single-responsibility-principle-srpå–®ä¸€è·è²¬åŸå‰‡">Single Responsibility Principle (SRP)ï¼šå–®ä¸€è·è²¬åŸå‰‡</a></h2>
<p>å–®ä¸€è·è²¬åŸå‰‡æŒ‡å‡ºï¼Œæ¯å€‹é¡åˆ¥éƒ½æ‡‰è©²åªæœ‰ä¸€å€‹è·è²¬ã€‚é€™æ¨£å¯ä»¥ä½¿ç¨‹å¼ç¢¼æ›´åŠ æ¸…æ™°ã€æ˜“æ–¼ç¶­è­·å’Œæ“´å±•ã€‚å¦‚æœä¸€å€‹é¡åˆ¥æœ‰å¤šå€‹è·è²¬ï¼Œé‚£éº¼ç•¶å…¶ä¸­ä¸€å€‹è·è²¬éœ€è¦æ›´æ”¹æ™‚ï¼Œå¯èƒ½æœƒå°å…¶ä»–è·è²¬é€ æˆå½±éŸ¿ï¼Œä¸¦ä¸”æœƒä½¿ç¨‹å¼ç¢¼è®Šå¾—è¤‡é›œã€‚</p>
<p>è§£æ±ºæ–¹æ¡ˆï¼šFacade</p>
<p>Facade æ˜¯ä¸€ç¨®è»Ÿé«”è¨­è¨ˆæ¨¡å¼ï¼Œæ—¨åœ¨ç°¡åŒ–è¤‡é›œçš„ä»‹é¢ã€‚å®ƒæä¾›äº†ä¸€å€‹ç°¡å–®çš„ä»‹é¢ï¼Œä»¥ä¾¿ç”¨æˆ¶ç«¯å¯ä»¥æ›´è¼•é¬†åœ°è¨ªå•è¤‡é›œçš„ç³»çµ±ã€‚</p>
<p>Facade æ¨¡å¼é€šå¸¸å°‡ä¸€å€‹è¤‡é›œçš„ç³»çµ±åˆ†è§£æˆå¤šå€‹ç¨ç«‹çš„æ¨¡å¡Šï¼Œæ¯å€‹æ¨¡å¡Šéƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½å’Œè·è²¬ã€‚ç„¶å¾Œï¼ŒFacade é¡åˆ¥å°‡é€™äº›æ¨¡å¡Šçµ„åˆåœ¨ä¸€èµ·ï¼Œæä¾›ä¸€å€‹ç°¡å–®çš„ä»‹é¢ï¼Œä½¿ç”¨æˆ¶ç«¯å¯ä»¥æ›´è¼•é¬†åœ°è¨ªå•ç³»çµ±ã€‚</p>
<p>Facade æ¨¡å¼çš„ä¸»è¦å„ªé»æ˜¯å¯ä»¥éš±è—ç³»çµ±çš„è¤‡é›œæ€§ï¼Œä¸¦æä¾›ä¸€å€‹ç°¡å–®çš„ä»‹é¢ï¼Œä½¿ç”¨æˆ¶ç«¯æ›´å®¹æ˜“ä½¿ç”¨ç³»çµ±ã€‚æ­¤å¤–ï¼Œå®ƒé‚„å¯ä»¥æé«˜ç¨‹å¼ç¢¼çš„å¯é‡ç”¨æ€§å’Œå¯æ¸¬è©¦æ€§ï¼Œæœ‰åŠ©æ–¼é–‹ç™¼å‡ºæ›´é«˜è³ªé‡çš„è»Ÿé«”ã€‚</p>
<pre><code>class Facade {
private Subsystem1 subsystem1;
private Subsystem2 subsystem2;
private Subsystem3 subsystem3;

Facade() {
subsystem1 = new Subsystem1();
subsystem2 = new Subsystem2();
subsystem3 = new Subsystem3();
}

void operation() {
subsystem1.operation1();
subsystem2.operation2();
subsystem3.operation3();
}
}


</code></pre>
<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼æ¼”ç¤ºäº† Facade æ¨¡å¼çš„åŸºæœ¬çµæ§‹ã€‚Facade é¡åˆ¥å°‡å¤šå€‹å­ç³»çµ±çµ„åˆåœ¨ä¸€èµ·ï¼Œæä¾›äº†ä¸€å€‹ç°¡å–®çš„ä»‹é¢ operation()ï¼Œä½¿ç”¨æˆ¶ç«¯å¯ä»¥æ›´è¼•é¬†åœ°è¨ªå•ç³»çµ±ã€‚</p>
<pre><code>class Subsystem1 {
public void operation1() {
System.out.println("Subsystem1 operation1");
}
}

class Subsystem2 {
public void operation2() {
System.out.println("Subsystem2 operation2");
}
}

class Subsystem3 {
public void operation3() {
System.out.println("Subsystem3 operation3");
}
}


</code></pre>
<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼æ¼”ç¤ºäº†å­ç³»çµ±çš„åŸºæœ¬çµæ§‹ã€‚æ¯å€‹å­ç³»çµ±éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½å’Œè·è²¬ï¼Œä¸¦ä¸”å¯ä»¥èˆ‡å…¶ä»–å­ç³»çµ±å”åŒå·¥ä½œï¼Œå¯¦ç¾è¤‡é›œçš„ç³»çµ±è¡Œç‚ºã€‚</p>
<p>ç¸½çš„ä¾†èªªï¼ŒFacade æ¨¡å¼æä¾›äº†ä¸€ç¨®ç°¡å–®è€Œå¼·å¤§çš„æ–¹æ³•ï¼Œå¯ä»¥ç°¡åŒ–è¤‡é›œçš„ç³»çµ±ï¼Œæé«˜ç¨‹å¼ç¢¼çš„å¯é‡ç”¨æ€§å’Œå¯æ¸¬è©¦æ€§ï¼Œä¸¦å¯¦ç¾æ›´é«˜è³ªé‡çš„è»Ÿé«”ã€‚</p>
<h2 id="openclosed-principle-ocpé–‹æ”¾å°é–‰åŸå‰‡"><a class="header" href="#openclosed-principle-ocpé–‹æ”¾å°é–‰åŸå‰‡">Open/Closed Principle (OCP)ï¼šé–‹æ”¾å°é–‰åŸå‰‡</a></h2>
<p>é–‹æ”¾å°é–‰åŸå‰‡æŒ‡å‡ºï¼Œè»Ÿé«”å¯¦é«”ï¼ˆä¾‹å¦‚é¡åˆ¥ã€æ¨¡å¡Šã€å‡½å¼ç­‰ï¼‰æ‡‰è©²å°æ“´å±•é–‹æ”¾ï¼Œå°ä¿®æ”¹å°é–‰ã€‚é€™æ„å‘³è‘—<strong>ç•¶éœ€è¦æ·»åŠ æ–°çš„åŠŸèƒ½æ™‚ï¼Œæ‡‰è©²æ“´å±•ç¾æœ‰çš„ç¨‹å¼ç¢¼ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ç¾æœ‰çš„ç¨‹å¼ç¢¼</strong>ã€‚é€™æ¨£å¯ä»¥ä½¿ç¨‹å¼ç¢¼æ›´åŠ ç©©å®šå’Œæ˜“æ–¼ç¶­è­·ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€å€‹é–‹æ”¾å°é–‰åŸå‰‡çš„ç¯„ä¾‹ï¼š</p>
<pre><code>abstract class Shape {
void draw();
}

class Rectangle extends Shape {
@override
void draw() {
print('Drawing a rectangle');
}
}

class Circle extends Shape {
@override
void draw() {
print('Drawing a circle');
}
}

class Drawing {
final List _shapes = [];

void addShape(Shape shape) {
_shapes.add(shape);
}

void drawAll() {
for (var shape in _shapes) {
shape.draw();
}
}
}

void main() {
final drawing = Drawing();
drawing.addShape(Rectangle());
drawing.addShape(Circle());
drawing.drawAll();
}


</code></pre>
<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼æ¼”ç¤ºäº†ä¸€å€‹ç°¡å–®çš„åœ–å½¢ç¹ªè£½ç¨‹å¼ã€‚Shape æ˜¯ä¸€å€‹æŠ½è±¡åŸºé¡ï¼ŒRectangle å’Œ Circle æ˜¯ Shape çš„æ´¾ç”Ÿé¡åˆ¥ã€‚Drawing é¡åˆ¥è² è²¬ç®¡ç†æ‰€æœ‰çš„ Shape ç‰©ä»¶ï¼Œä¸¦å°‡å®ƒå€‘å…¨éƒ¨ç¹ªè£½å‡ºä¾†ã€‚</p>
<p>ç¾åœ¨ï¼Œå¦‚æœæˆ‘å€‘éœ€è¦æ·»åŠ ä¸€å€‹ Triangle é¡åˆ¥ï¼Œæˆ‘å€‘å¯ä»¥é€éç¹¼æ‰¿ Shape ä¾†é€²è¡Œæ“´å±•ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸæœ‰çš„ç¨‹å¼ç¢¼ï¼š</p>
<pre><code>class Triangle extends Shape {
@override
void draw() {
print('Drawing a triangle');
}
}

</code></pre>
<p>é€™æ¨£ï¼Œæˆ‘å€‘å°±æˆåŠŸåœ°æ“´å±•äº†ç¨‹å¼çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸæœ‰çš„ç¨‹å¼ç¢¼ã€‚é€™å°±æ˜¯é–‹æ”¾å°é–‰åŸå‰‡çš„é­…åŠ›æ‰€åœ¨ã€‚</p>
<h2 id="liskov-substitution-principle-lspé‡Œæ°æ›¿æ›åŸå‰‡"><a class="header" href="#liskov-substitution-principle-lspé‡Œæ°æ›¿æ›åŸå‰‡">Liskov Substitution Principle (LSP)ï¼šé‡Œæ°æ›¿æ›åŸå‰‡</a></h2>
<p>é‡Œæ°æ›¿æ›åŸå‰‡æŒ‡å‡ºï¼Œ<strong>å­é¡åˆ¥æ‡‰è©²èƒ½å¤ æ›¿æ›å…¶çˆ¶é¡åˆ¥åœ¨ä»»ä½•åœ°æ–¹å‡ºç¾çš„ä½ç½®ï¼Œè€Œä¸æœƒå°ç¨‹å¼çš„æ­£ç¢ºæ€§ç”¢ç”Ÿå½±éŸ¿</strong>ã€‚é€™æ¨£å¯ä»¥ä½¿ç¨‹å¼ç¢¼æ›´åŠ éˆæ´»å’Œå¯é‡ç”¨ï¼Œä¸¦ä¸”å¯ä»¥é™ä½ä»£ç¢¼å‡ºéŒ¯çš„é¢¨éšªã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€å€‹ LSP åŸå‰‡çš„ç¯„ä¾‹ï¼š</p>
<pre><code>class Rectangle {
protected int width;
protected int height;

public void setWidth(int width) {
this.width = width;
}

public void setHeight(int height) {
this.height = height;
}

public int getWidth() {
return width;
}

public int getHeight() {
return height;
}

public int getArea() {
return width * height;
}
}

class Square extends Rectangle {
@Override
public void setWidth(int width) {
super.setWidth(width);
super.setHeight(width);
}

@Override
public void setHeight(int height) {
super.setHeight(height);
super.setWidth(height);
}
}

class LspDemo {
static void useIt(Rectangle r) {
int width = r.getWidth();
r.setHeight(10);
System.out.println("Expected area of " + (width * 10) + ", got " + r.getArea());
}

public static void main(String[] args) {
Rectangle rc = new Rectangle();
rc.setWidth(2);
rc.setHeight(3);
useIt(rc);

Rectangle sq = new Square();
sq.setWidth(5);
useIt(sq);
}
}


</code></pre>
<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼æ¼”ç¤ºäº† LSP åŸå‰‡çš„é‹ä½œæ–¹å¼ã€‚Rectangle æ˜¯ä¸€å€‹åŸºç¤é¡åˆ¥ï¼ŒSquare æ˜¯ Rectangle çš„ä¸€å€‹æ´¾ç”Ÿé¡åˆ¥ã€‚Square é¡åˆ¥ç¹¼æ‰¿äº† Rectangle é¡åˆ¥çš„æ‰€æœ‰å±¬æ€§å’Œæ–¹æ³•ï¼Œä¸¦ä¸”é‡å¯«äº†å…¶ä¸­çš„ setWidth å’Œ setHeight æ–¹æ³•ï¼Œä»¥ç¢ºä¿ width å’Œ height å§‹çµ‚ç›¸ç­‰ã€‚</p>
<p>åœ¨ LspDemo é¡åˆ¥ä¸­ï¼Œæˆ‘å€‘å…ˆå‰µå»ºäº†ä¸€å€‹ Rectangle å°è±¡ rcï¼Œä¸¦å°‡å…¶å¯¬åº¦è¨­ç½®ç‚º 2ï¼Œé«˜åº¦è¨­ç½®ç‚º 3ã€‚ç„¶å¾Œï¼Œæˆ‘å€‘èª¿ç”¨äº† useIt å‡½å¼ï¼Œå°‡ rc å°è±¡ä½œç‚ºåƒæ•¸å‚³ééå»ã€‚useIt å‡½å¼å°‡é«˜åº¦è¨­ç½®ç‚º 10ï¼Œä¸¦è¨ˆç®—å‡ºé æœŸçš„é¢ç©ã€‚æœ€å¾Œï¼Œå®ƒæ‰“å°å‡ºäº†é æœŸçš„é¢ç©å’Œå¯¦éš›çš„é¢ç©ã€‚</p>
<p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å‰µå»ºäº†ä¸€å€‹ Square å°è±¡ sqï¼Œä¸¦å°‡å…¶å¯¬åº¦è¨­ç½®ç‚º 5ã€‚ç„¶å¾Œï¼Œæˆ‘å€‘å†æ¬¡èª¿ç”¨äº† useIt å‡½å¼ï¼Œä¸¦å°‡ sq å°è±¡ä½œç‚ºåƒæ•¸å‚³ééå»ã€‚ç”±æ–¼ Square é¡åˆ¥ç¹¼æ‰¿äº† Rectangle é¡åˆ¥çš„æ‰€æœ‰å±¬æ€§å’Œæ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ç¶­è­· LSP åŸå‰‡çš„å®Œæ•´æ€§ï¼Œå®ƒè¦æ±‚å­é¡åˆ¥å¿…é ˆèƒ½å¤ ä»£æ›¿å…¶çˆ¶é¡åˆ¥ï¼Œè€Œä¸æœƒå°ç¨‹å¼çš„æ­£ç¢ºæ€§ç”¢ç”Ÿå½±éŸ¿ã€‚å¦‚æœä¸éµå¾ª LSP åŸå‰‡ï¼Œå¯èƒ½æœƒå°è‡´ç¨‹å¼å‡ºç¾ä¸å¯é æ¸¬çš„éŒ¯èª¤ï¼Œä¸¦ä¸”æœƒä½¿ç¨‹å¼ç¢¼è®Šå¾—æ›´åŠ è¤‡é›œå’Œé›£ä»¥ç¶­è­·ã€‚</p>
<h2 id="interface-segregation-principle-ispä»‹é¢éš”é›¢åŸå‰‡"><a class="header" href="#interface-segregation-principle-ispä»‹é¢éš”é›¢åŸå‰‡">Interface Segregation Principle (ISP)ï¼šä»‹é¢éš”é›¢åŸå‰‡</a></h2>
<p>ä»‹é¢éš”é›¢åŸå‰‡æŒ‡å‡ºï¼Œ<strong>ç”¨æˆ¶ç«¯ä¸æ‡‰è©²ä¾è³´æ–¼å®ƒä¸éœ€è¦çš„ä»‹é¢</strong>ã€‚é€™æ¨£å¯ä»¥ä½¿ç¨‹å¼ç¢¼æ›´åŠ ç°¡æ½”å’Œæ˜“æ–¼ç¶­è­·ã€‚å¦‚æœä¸€å€‹ä»‹é¢å¤ªå¤§ï¼Œé‚£éº¼ä¸€äº›ç”¨æˆ¶ç«¯å¯èƒ½éœ€è¦å¯¦ç¾å®ƒå€‘ä¸éœ€è¦çš„æ–¹æ³•ï¼Œé€™å°‡å°è‡´ç¨‹å¼ç¢¼çš„æµªè²»å’Œä¸å¿…è¦çš„è¤‡é›œæ€§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€å€‹ ISP åŸå‰‡çš„ç¯„ä¾‹ï¼š</p>
<pre><code>abstaract Machine {
void print();

void scan();

void fax();
}

class MultiFunctionPrinter implements Machine {
@Override
void print() {
// print implementation
}

@Override
void scan() {
// scan implementation
}

@Override
void fax() {
// fax implementation
}
}

class OldFashionedPrinter implements Machine {
@Override
void print() {
// print implementation
}

@Override
void scan() {
// Do nothing, an OldFashionedPrinter can't scan
}

@Override
void fax() {
// Do nothing, an OldFashionedPrinter can't fax
}
}


</code></pre>
<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼æ¼”ç¤ºäº† ISP åŸå‰‡çš„é‹ä½œæ–¹å¼ã€‚Machine æ˜¯ä¸€å€‹ä»‹é¢ï¼Œå®ƒå®šç¾©äº†ä¸‰å€‹æ–¹æ³•ï¼šprintã€scan å’Œ faxã€‚MultiFunctionPrinter é¡åˆ¥å¯¦ç¾äº† Machine ä»‹é¢ï¼Œå®ƒå¯ä»¥åŸ·è¡Œ printã€scan å’Œ fax ä¸‰å€‹æ–¹æ³•ã€‚OldFashionedPrinter ä¹Ÿå¯¦ç¾äº† Machine ä»‹é¢ï¼Œä½†æ˜¯å®ƒåªèƒ½åŸ·è¡Œ print æ–¹æ³•ï¼Œå› ç‚ºå®ƒä¸èƒ½æƒæå’Œå‚³çœŸã€‚</p>
<p>é€™è£¡çš„å•é¡Œæ˜¯ï¼ŒOldFashionedPrinter é¡åˆ¥å¯¦ç¾äº†å®ƒä¸éœ€è¦çš„æ–¹æ³•ï¼ˆscan å’Œ faxï¼‰ã€‚é€™æœƒå°è‡´ç¨‹å¼ç¢¼çš„æµªè²»å’Œä¸å¿…è¦çš„è¤‡é›œæ€§ã€‚ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥é€éä»‹é¢éš”é›¢åŸå‰‡ä¾†é‡æ–°è¨­è¨ˆç¨‹å¼ï¼š</p>
<pre><code>abstract class Printer {
void print();
}

abstract class Scanner {
void scan();
}

abstract class Fax {
void fax();
}

class MultiFunctionMachine implements Printer, Scanner, Fax {
@override
void print() {
// print implementation
}

@override
void scan() {
// scan implementation
}

@override
void fax() {
// fax implementation
}
}

class OldFashionedPrinter implements Printer {
@override
void print() {
// print implementation
}
}

</code></pre>
<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼æ¼”ç¤ºäº†é‡æ–°è¨­è¨ˆéçš„ç¨‹å¼ã€‚æˆ‘å€‘ç¾åœ¨å°‡ Machine ä»‹é¢åˆ†è§£ç‚ºä¸‰å€‹ç¨ç«‹çš„ä»‹é¢ï¼šPrinterã€Scanner å’Œ Faxã€‚ç„¶å¾Œï¼Œæˆ‘å€‘å‰µå»ºäº†ä¸€å€‹ MultiFunctionMachine é¡åˆ¥ï¼Œå®ƒå¯¦ç¾äº†é€™ä¸‰å€‹ä»‹é¢ã€‚OldFashionedPrinter é¡åˆ¥å¯¦ç¾äº† Printer ä»‹é¢ï¼Œä½†æ˜¯å®ƒä¸éœ€è¦å¯¦ç¾ scan å’Œ fax æ–¹æ³•ã€‚</p>
<p>é€™æ¨£ï¼Œæˆ‘å€‘å°±æˆåŠŸåœ°å¯¦ç¾äº†ä»‹é¢éš”é›¢åŸå‰‡ï¼Œç”¨æˆ¶ç«¯ä¸å†ä¾è³´æ–¼å®ƒä¸éœ€è¦</p>
<h2 id="dependency-inversion-principle-dipä¾è³´åè½‰åŸå‰‡"><a class="header" href="#dependency-inversion-principle-dipä¾è³´åè½‰åŸå‰‡">Dependency Inversion Principle (DIP)ï¼šä¾è³´åè½‰åŸå‰‡</a></h2>
<p>ä¾è³´åè½‰åŸå‰‡æŒ‡å‡ºï¼Œé«˜å±¤æ¨¡å¡Šä¸æ‡‰è©²ä¾è³´æ–¼ä½å±¤æ¨¡å¡Šï¼Œå…©è€…éƒ½æ‡‰è©²ä¾è³´æ–¼æŠ½è±¡ã€‚é€™æ¨£å¯ä»¥ä½¿ç¨‹å¼ç¢¼æ›´åŠ éˆæ´»å’Œæ˜“æ–¼ç¶­è­·ã€‚å¦‚æœé«˜å±¤æ¨¡å¡Šç›´æ¥ä¾è³´æ–¼ä½å±¤æ¨¡å¡Šï¼Œé‚£éº¼ç•¶ä½å±¤æ¨¡å¡Šéœ€è¦æ›´æ”¹æ™‚ï¼Œé«˜å±¤æ¨¡å¡Šä¹Ÿéœ€è¦æ›´æ”¹ï¼Œé€™å°‡å°è‡´ç¨‹å¼ç¢¼çš„è„†å¼±æ€§å’Œé›£ä»¥ç¶­è­·æ€§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€å€‹ä¾è³´åè½‰åŸå‰‡çš„ç¯„ä¾‹ï¼š</p>
<pre><code>abstract class Database {
void connect();
}

class MySqlConnection implements Database {
@override
void connect() {
// implementation for MySQL connection
}
}

class OracleConnection implements Database {
@override
void connect() {
// implementation for Oracle connection
}
}

class DataService {
final Database database;

DataService(this.database);

void fetchData() {
database.connect();
// code to fetch data
}
}

</code></pre>
<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼æ¼”ç¤ºäº†ä¾è³´åè½‰åŸå‰‡çš„é‹ä½œæ–¹å¼ã€‚Database æ˜¯ä¸€å€‹æŠ½è±¡é¡åˆ¥ï¼Œå®ƒå®šç¾©äº† connect æ–¹æ³•ã€‚MySqlConnection å’Œ OracleConnection æ˜¯ Database çš„å…©å€‹å¯¦ç¾é¡åˆ¥ã€‚DataService é¡åˆ¥ä¾è³´æ–¼ Database é¡åˆ¥ï¼Œå®ƒçš„å»ºæ§‹å­æ¥æ”¶ä¸€å€‹ Database é¡åˆ¥çš„å¯¦ä¾‹ã€‚fetchData æ–¹æ³•ä½¿ç”¨ database ä¾†é€£æ¥æ•¸æ“šåº«ä¸¦ç²å–æ•¸æ“šã€‚</p>
<p>é€™æ¨£ï¼Œæˆ‘å€‘å°±æˆåŠŸåœ°å¯¦ç¾äº†ä¾è³´åè½‰åŸå‰‡ï¼Œé«˜å±¤æ¨¡å¡Š DataService ä¸ç›´æ¥ä¾è³´æ–¼ä½å±¤æ¨¡å¡Š MySqlConnection å’Œ OracleConnectionï¼Œè€Œæ˜¯ä¾è³´æ–¼æŠ½è±¡çš„ Database é¡åˆ¥ã€‚é€™æ¨£å¯ä»¥ä½¿ç¨‹å¼ç¢¼æ›´åŠ éˆæ´»å’Œæ˜“æ–¼æ“´å±•ï¼Œç•¶éœ€è¦åˆ‡æ›æ•¸æ“šåº«æ™‚ï¼ŒDataService é¡åˆ¥ä¸éœ€è¦ä¿®æ”¹ç¨‹å¼ç¢¼ï¼Œåªéœ€è¦ä½¿ç”¨ä¸åŒçš„ Database å¯¦ç¾é¡åˆ¥å³å¯ã€‚é€™æ¨£å¯ä»¥é™ä½ä»£ç¢¼å‡ºéŒ¯çš„é¢¨éšªï¼Œä¸¦å¯¦ç¾æ›´é«˜è³ªé‡çš„è»Ÿé«”ã€‚</p>
<h1 id="æ¶æ§‹"><a class="header" href="#æ¶æ§‹">æ¶æ§‹</a></h1>
<p><strong>ä¸€åå¥½çš„æ¶æ§‹å¸«ï¼Œå¯ä»¥å°‡ä¸åšå‡ºæ±ºå®šçš„æ•¸é‡çµ¦æœ€å¤§åŒ–</strong></p>
<h1 id="clean-architecture"><a class="header" href="#clean-architecture">Clean Architecture</a></h1>
<p>Clean Architecture ä¸­çš„æ¯ä¸€å±¤éƒ½æœ‰å…¶ç¨ç«‹çš„è·è²¬å’ŒåŠŸèƒ½ã€‚é€™äº›å±¤æ¬¡å¾æœ€å…§éƒ¨åˆ°æœ€å¤–éƒ¨åˆ†åˆ¥æ˜¯ï¼š</p>
<ul>
<li>
<p>å¯¦é«”å±¤(Entity Layer)</p>
</li>
<li>
<p>ç”¨ä¾‹å±¤(User Case Layer)</p>
</li>
<li>
<p>ä»‹é¢å±¤(Interface Layer)</p>
</li>
</ul>
<p><img src="images/201173636UN3TtcTAM.png" alt="" /></p>
<h3 id="å¯¦é«”å±¤entity-layer"><a class="header" href="#å¯¦é«”å±¤entity-layer">å¯¦é«”å±¤(Entity Layer)</a></h3>
<p>å¯¦é«”å±¤æ˜¯ Clean Architecture ä¸­æœ€å…§éƒ¨çš„ä¸€å±¤ï¼Œå®ƒåŒ…å«äº†æ‡‰ç”¨ç¨‹åºä¸­çš„å¯¦é«”é¡åˆ¥å’Œæ¥­å‹™é‚è¼¯ã€‚å¯¦é«”å±¤æ˜¯æ•´å€‹æ‡‰ç”¨ç¨‹åºçš„æ ¸å¿ƒï¼Œå®ƒå®šç¾©äº†æ‡‰ç”¨ç¨‹åºä¸­çš„æ ¸å¿ƒæ¥­å‹™é‚è¼¯ã€‚</p>
<p>å¯¦é«”å±¤çš„è·è²¬æ˜¯ï¼š</p>
<ul>
<li>
<p>å®šç¾©å¯¦é«”é¡åˆ¥å’Œæ¥­å‹™é‚è¼¯ã€‚</p>
</li>
<li>
<p>è² è²¬å°‡å¯¦é«”é¡åˆ¥æ˜ å°„åˆ°æ•¸æ“šåº«ä¸­çš„è¡¨æ ¼ã€‚</p>
</li>
</ul>
<p>å¯¦é«”å±¤æ‡‰è©²æ˜¯å®Œå…¨ç¨ç«‹çš„ï¼Œä¸ä¾è³´æ–¼å…¶ä»–å±¤æ¬¡ã€‚é€™æ¨£å¯ä»¥ä½¿å¯¦é«”å±¤æ›´åŠ æ˜“æ–¼æ¸¬è©¦å’Œé‡ç”¨ã€‚</p>
<h3 id="ç”¨ä¾‹å±¤use-case-layer"><a class="header" href="#ç”¨ä¾‹å±¤use-case-layer">ç”¨ä¾‹å±¤(Use Case Layer)</a></h3>
<p>ç”¨ä¾‹å±¤æ˜¯ Clean Architecture ä¸­çš„ç¬¬äºŒå±¤ï¼Œå®ƒåŒ…å«äº†æ‡‰ç”¨ç¨‹åºçš„ç”¨ä¾‹å’Œæ¥­å‹™é‚è¼¯ã€‚ç”¨ä¾‹å±¤çš„è·è²¬æ˜¯ï¼š</p>
<ul>
<li>
<p>å®šç¾©ç”¨ä¾‹å’Œæ¥­å‹™é‚è¼¯ã€‚</p>
</li>
<li>
<p>è² è²¬è™•ç†ç”¨æˆ¶è¼¸å…¥å’Œè¼¸å‡ºã€‚</p>
</li>
</ul>
<p>ç”¨ä¾‹å±¤è™•ç†æ‰€æœ‰çš„ç”¨æˆ¶äº¤äº’ï¼ŒåŒ…æ‹¬ç”¨æˆ¶è¼¸å…¥å’Œè¼¸å‡ºã€‚ç”¨ä¾‹å±¤ä¹Ÿè² è²¬èª¿ç”¨å¯¦é«”å±¤æä¾›çš„æœå‹™å’Œæ–¹æ³•ã€‚</p>
<p>ç”¨ä¾‹å±¤æ‡‰è©²æ˜¯å®Œå…¨ç¨ç«‹çš„ï¼Œä¸ä¾è³´æ–¼å…¶ä»–å±¤æ¬¡ã€‚é€™æ¨£å¯ä»¥ä½¿ç”¨ä¾‹å±¤æ›´åŠ æ˜“æ–¼æ¸¬è©¦å’Œé‡ç”¨ã€‚</p>
<h3 id="ä»‹é¢å±¤interface-layer"><a class="header" href="#ä»‹é¢å±¤interface-layer">ä»‹é¢å±¤(Interface Layer)</a></h3>
<p>ä»‹é¢å±¤æ˜¯ Clean Architecture ä¸­æœ€å¤–éƒ¨çš„ä¸€å±¤ï¼Œå®ƒåŒ…å«äº†æ‡‰ç”¨ç¨‹åºçš„ä»‹é¢å’Œ UI é‚è¼¯ã€‚ä»‹é¢å±¤çš„è·è²¬æ˜¯ï¼š</p>
<ul>
<li>
<p>å®šç¾©æ‡‰ç”¨ç¨‹åºçš„ä»‹é¢å’Œ UI é‚è¼¯ã€‚</p>
</li>
<li>
<p>è² è²¬å‘ˆç¾ç”¨æˆ¶ç•Œé¢ã€‚</p>
</li>
</ul>
<p>ä»‹é¢å±¤è™•ç†æ‰€æœ‰çš„ç”¨æˆ¶ç•Œé¢ï¼ŒåŒ…æ‹¬ç”¨æˆ¶ç•Œé¢å’Œ UI é‚è¼¯ã€‚ä»‹é¢å±¤ä¹Ÿè² è²¬èª¿ç”¨ç”¨ä¾‹å±¤æä¾›çš„æœå‹™å’Œæ–¹æ³•ã€‚</p>
<h2 id="çµè«–"><a class="header" href="#çµè«–">çµè«–</a></h2>
<p>èªªåˆ°å¯«ç¨‹å¼ï¼Œæˆ‘å€‘éƒ½å¸Œæœ›èƒ½å¯«å‡ºæ—¢å¥½ç”¨åˆä¸å®¹æ˜“å‡ºéŒ¯çš„ç¨‹å¼ï¼Œå°å§ï¼ŸClean Architectureå°±æ˜¯å¹«æˆ‘å€‘é”åˆ°é€™å€‹ç›®çš„çš„å¥½æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒè®“æˆ‘å€‘çš„ç¨‹å¼ç¢¼è®Šå¾—æ›´æ¸…æ™°ã€å¥½æ¸¬è©¦ã€è€Œä¸”æ¨¡å¡Šé–“äº’ç›¸ç‰½æ‰¯å¾—å°‘ã€‚é‚£SOLIDåŸå‰‡å‘¢ï¼Ÿå°±æ˜¯å‘Šè¨´æˆ‘å€‘å¦‚ä½•åšåˆ°é€™ä¸€é»çš„äº”å€‹å»ºè­°æˆ–æŠ€å·§ã€‚</p>
<p>é€éé€™ç¯‡æ–‡ç« ï¼Œæˆ‘å€‘çœ‹åˆ°äº†ï¼Œå¥½çš„æ¶æ§‹å’Œè¨­è¨ˆå…¶å¯¦ä¸åªæ˜¯è¦è®“ç¨‹å¼é‹è¡Œï¼Œæ›´é‡è¦çš„æ˜¯è¦è®“å®ƒèƒ½å¤ éš¨è‘—æ™‚é–“éå»ï¼Œé‚„èƒ½å¤ è¼•é¬†ä¿®æ”¹ã€å¢åŠ åŠŸèƒ½ï¼Œè€Œä¸æœƒä¸€åœ˜äº‚ã€‚å¾SOLIDåˆ°Clean Architectureï¼Œéƒ½æ˜¯å‘Šè¨´æˆ‘å€‘å¦‚ä½•å¯«å‡ºé€™æ¨£å¥½çš„ç¨‹å¼çš„é»„é‡‘æ³•å‰‡ï¼</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="day36.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="day38.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="day36.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="day38.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
